<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cosmovon</title>

<!-- Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Instrument+Serif:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=TikTok+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">



<style>
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:"TikTok Sans",sans-serif;background:#fafafa;color:#111;overflow-x:hidden;}
header{font-family:"Instrument Serif", serif;font-size:32px;text-align:center;padding:20px 0 10px 0;letter-spacing:-0.5px;}
main{max-width:900px;margin:20px auto;padding:0 16px;}
.news-item{background:white;padding:24px;border-radius:14px;margin-bottom:24px;border:1px solid #eaeaea;}
.news-title{font-family:"Instrument Serif", serif;font-size:28px;margin-bottom:12px;line-height:1.2;}
.news-body{font-size:16px;line-height:1.6;color:#333;}
.news-item img{width:100%;margin-top:16px;border-radius:12px;}

/* SEARCH BUTTON */
#openSearchButton {
    position: fixed;
    top: 90px; /* moved slightly down to avoid overlap with header */
    right: 20px;
    width:42px;
    height:42px;
    border-radius:50%;
    border:1px solid #ccc;
    background:white;
    display:flex;
    justify-content:center;
    align-items:center;
    cursor:pointer;
    z-index:20;
    transition:opacity .2s ease;
}

#openSearchButton:hover{opacity:0.8;}

/* SEARCH OVERLAY */
#searchOverlay{
    position:fixed; top:0; left:0; width:100%; height:100%;
    background:rgba(250,250,250,0.97);
    opacity:0; pointer-events:none; transition:opacity .25s ease;
    z-index:50; display:flex; flex-direction:column; padding:30px;
}
#searchOverlay.active{opacity:1; pointer-events:auto;}
#searchBox{width:calc(100% - 40px); margin:80px auto 0 auto; padding:14px 18px; font-size:18px; border-radius:12px; border:1px solid #ccc; outline:none; display:block;}
#closeSearch{position:absolute; top:35px; right:25px; font-size:22px; cursor:pointer; opacity:0.7;}

/* ADD STORY BUTTON */
#addButton{
    position:fixed; bottom:40px; right:30px; width:58px; height:58px;
    border-radius:50%; background:black; color:white; font-size:32px;
    display:flex; justify-content:center; align-items:center; cursor:pointer; z-index:20; transition:transform .2s ease;
}
#addButton:hover{transform:scale(1.05);}

/* STORY PANEL */
#storyPanel{
    position:fixed; bottom:0; left:0; width:100%; height:82%;
    background:white; border-top-left-radius:26px; border-top-right-radius:26px;
    transform:translateY(120%); transition:transform .35s ease;
    z-index:100; display:flex; flex-direction:column; padding:22px;
}
#storyPanel.active{transform:translateY(0);}
#closeStory{position:absolute; top:16px; right:22px; font-size:22px; cursor:pointer; opacity:0.7;}
#storyTitle{font-family:"Instrument Serif", serif; font-size:24px; border:none; outline:none; margin-top:52px;}
#storyBody{margin-top:18px; border:none; outline:none; height:100%; resize:none; font-size:17px; font-family:"TikTok Sans",sans-serif;}
#publishButton{margin-top:14px; padding:12px; background:black; color:white; border:none; font-size:17px; border-radius:10px; cursor:pointer;}
</style>
</head>

<body>
<header>Cosmovon</header>

<main>
    <div id="newsList"></div>
</main>

<!-- SEARCH BUTTON -->
<div id="openSearchButton">⌕</div>

<!-- SEARCH OVERLAY -->
<div id="searchOverlay">
    <div id="closeSearch">✕</div>
    <input id="searchBox" placeholder="Search...">
    <div id="searchResults"></div>
</div>

<div id="fullStoryPanel">
    <div id="closeFullStory">✕</div>
    <div id="fullStoryTitle"></div>
    <div id="fullStoryBody"></div>
</div>

<!-- ADD STORY BUTTON -->
<div id="addButton">+</div>

<!-- STORY PANEL -->
<div id="storyPanel">
    <div id="closeStory">✕</div>
    <input id="storyTitle" placeholder="Title...">
    <textarea id="storyBody" placeholder="Write your story..."></textarea>
    <button id="publishButton">Publish</button>
</div>

<style>
#fullStoryPanel{
    position:fixed; bottom:0; left:0; width:100%; height:100%;
    background:white; z-index:150; display:flex; flex-direction:column;
    padding:30px; overflow-y:auto;
    transform: translateY(120%);
    transition: transform .35s ease;
}
#fullStoryPanel.active{
    transform: translateY(0);
}
#closeFullStory{position:absolute; top:20px; right:25px; font-size:22px; cursor:pointer; opacity:0.7;}
#fullStoryTitle{font-family:"Instrument Serif", serif; font-size:28px; margin-top:60px; margin-bottom:20px;}
#fullStoryBody{font-family:"TikTok Sans",sans-serif; font-size:17px; line-height:1.6;}
</style>

<script>
let stories = JSON.parse(localStorage.getItem("stories")) || [];

const newsList = document.getElementById("newsList");
const storyPanel = document.getElementById("storyPanel");
const addButton = document.getElementById("addButton");
const closeStory = document.getElementById("closeStory");
const publishButton = document.getElementById("publishButton");
const storyTitle = document.getElementById("storyTitle");
const storyBody = document.getElementById("storyBody");

// ===== NEW: create <input type="file"> dynamically =====
let storyImage = document.createElement("input");
storyImage.type = "file";
storyImage.accept = "image/*";
storyImage.style.marginTop = "10px";
document.getElementById("storyPanel").appendChild(storyImage);

// render stories
function renderStories() {
    newsList.innerHTML = "";

    stories.forEach((story, index) => {
        const item = document.createElement("div");
        item.className = "news-item";

        item.innerHTML = `
            <div class="news-title">${story.title}</div>
            <div class="news-body">${story.body}</div>
            ${story.image ? `<img src="${story.image}">` : ""}
        `;

        newsList.appendChild(item);
    });
}

// open panel
addButton.addEventListener("click", () => {
    storyPanel.classList.add("active");
});

// close panel
closeStory.addEventListener("click", () => {
    storyPanel.classList.remove("active");
});

// publish story
publishButton.addEventListener("click", () => {
    const title = storyTitle.value.trim();
    const body = storyBody.value.trim();

    if (!title || !body) return;

    // read image as Base64
    if (storyImage.files[0]) {
        const reader = new FileReader();
        reader.onload = () => {
            stories.push({
                title,
                body,
                image: reader.result
            });
            localStorage.setItem("stories", JSON.stringify(stories));
            renderStories();
        };
        reader.readAsDataURL(storyImage.files[0]);
    } else {
        stories.push({ title, body, image: null });
        localStorage.setItem("stories", JSON.stringify(stories));
        renderStories();
    }

    storyTitle.value = "";
    storyBody.value = "";
    storyImage.value = "";
    storyPanel.classList.remove("active");
});

// load existing stories
renderStories();
</script>

</body>
</html>
